--==================================================================================================================
-- CRT BY:	  Jesse Wei
-- CRT DT:	  06/22/2015
--
-- Description: ANE-30940 INC2293422 - ESI - YMCALA - CC discrepancy - Leslie Stevens (438201)
--
--==================================================================================================================
Use YMCALA

SET XACT_ABORT ON

BEGIN TRANSACTION 

	IF EXISTS(SELECT * FROM RECEIPTPAYMENTS WHERE RECEIPTPAYMENT_ID = 1241550 AND AMS_ACCOUNT_ID = '13953496118001423865VFWMYEDXFDFRPCBWQPOMTNNZFGTDQN[N' AND CARDNUMBER='xxx9303') BEGIN
		UPDATE RECEIPTPAYMENTS SET CARDNUMBER='XXX6901', CARDEXPIRATION='01/2015', SAVED_CREDITCARD_ID = -1 WHERE RECEIPTPAYMENT_ID = 1241550
		UPDATE ICVERIFYLOG SET CARDNUMBER='XXX6901', CARDEXPIRATION='01/2015' WHERE ICVERIFYLOG_ID = 671805
		UPDATE CREDITCARDS SET AMS_ACCOUNT_ID='14092634989000344456FFAXGOYBWEMLMIZCIRPFYOCULBVRXUQW' WHERE CREDIT_CARD_ID = 13230

		PRINT 'Datafix applied'
	END
	ELSE BEGIN
		PRINT 'Nothing is updated. Data does not match what is expected.'
	END

COMMIT TRANSACTION
